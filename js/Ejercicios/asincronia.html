<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asíncronía en JavaScript</title>
</head>
<body>
    <h1>Asíncronía en JavaScript</h1>
    <script>
    //SECCION 44
        /*
        console.log("inicio")
        setTimeout(() => {
            console.log("Ejecutando un setTimeout, esto se ejecuta una sola vez")
        }, 2000);

        setInterval(() => {
           console.log("Ejecutando un setInterval, esto se ejecuta indefinidamente cada cierto intervalo de tiempo") 
        }, 1000);
*

       let temporizador= setInterval(() => {
            console.log(new Date().toLocaleTimeString())
        }, 1000);

        clearInterval(temporizador)
        console.log("Despues del clearInterval")
        */

    //SECCION 45
     /*   // Codigo Sincrono bloqueante
        (()=>{
            console.log("Codigo Sincrono")
            console.log("Inicio")

            function dos(){
                console.log("Dos")
            }

            function uno(){
                console.log("Uno")
                dos()
                console.log("Tres")
            }
            uno()
            console.log("Fin")
        })()

        console.log("**********************");

        //Codigo Asincrono no Bloqueante 

        (() => {
        console.log("Codigo Asincrono")
        console.log("Inicio")

            function dos(){
                setTimeout(function (){
                    console.log("Dos")
                },1000)}
    
            function uno(){
                setTimeout(function(){
                console.log("Uno")
              },0)
              dos()
              console.log("Tres")
            }
            uno()
            console.log("Fin")
              
        })()
       
    //Seccion 46

    function cuadradoCallback(value, callback){
        setTimeout(() => {
         callback(value, value*value);    
        }, 0 | Math.random() * 1000 );
    }

    cuadradoCallback(0,(value, result)=>{
        console.log("Inicia Callback")
        console.log(`Callback:${value},${result}`)
        cuadradoCallback(1,(value, result)=>{
            console.log(`Callback:${value},${result}`)
            cuadradoCallback(2,(value, result)=>{
                console.log(`Callback:${value},${result}`)
                cuadradoCallback(3,(value, result)=>{
                    console.log(`Callback:${value},${result}`)
                    cuadradoCallback(4,(value, result)=>{
                        console.log(`Callback:${value},${result}`)
                    })
                })
            })
        })
    })

    //SECCION 47
    
    function cuadradoPromisse(value){
        if(typeof value !== "number"){
          return Promise.reject(`El valor "${value}" ingresado no es un numero`)
        } 
            
        return new Promise((resolve, reject)=>{
            setTimeout(() => {
               resolve({
                value,
                result:value*value
               }) 
            }, 0 | Math.random() * 1000 );
        })   
    }

    cuadradoPromisse(0)
    .then(Obj=>{
        //console.log(obj)
        console.log("Inicio Promise")
        console.log(`Promise:${Obj.value}, ${Obj.result}`)
        return cuadradoPromisse(1)
        })
        .then(Obj=>{
        console.log(`Promise:${Obj.value}, ${Obj.result}`)
        return cuadradoPromisse(2)
        })
        .then(Obj=>{
        console.log(`Promise:${Obj.value}, ${Obj.result}`)
        return cuadradoPromisse(3)
        })
    
        .then(Obj=>{
        console.log(`Promise:${Obj.value}, ${Obj.result}`)
        return cuadradoPromisse(4)
        })
    
        .then(Obj=>{
        console.log(`Promise:${Obj.value}, ${Obj.result}`)
        return cuadradoPromisse(5)
        })
        .then(Obj=>{
        console.log(`Promise:${Obj.value}, ${Obj.result}`)
        return cuadradoPromisse("hola")
        })
    
        .then(Obj=>{
        console.log(`Promise:${Obj.value}, ${Obj.result}`)
       console.log("Fin Promise")
        })
        .catch(err => console.error(err))


            //SECCION 48
              
    function cuadradoPromisse(value){
        if(typeof value !== "number"){
          return Promise.reject(`El valor "${value}" ingresado no es un numero`)
        } 
            
        return new Promise((resolve, reject)=>{
            setTimeout(() => {
               resolve({
                value,
                result:value*value
               }) 
            }, 0 | Math.random() * 1000 );
        })   
    }

        async function functionAsincronaDeclarada(){
            try{
                console.log("Inicio Async Funtion")
                let obj= await cuadradoPromisse(0)
                console.log(`Async Funtion ${obj.value}, ${obj.result}`)
                
                  obj= await cuadradoPromisse(1)
                console.log(`Async Funtion ${obj.value}, ${obj.result}`)
                  
                obj= await cuadradoPromisse(2)
                console.log(`Async Funtion ${obj.value}, ${obj.result}`)
                
                obj= await cuadradoPromisse(3)
                console.log(`Async Funtion ${obj.value}, ${obj.result}`)
                
                obj= await cuadradoPromisse(4)
                console.log(`Async Funtion ${obj.value}, ${obj.result}`)
                
                obj= await cuadradoPromisse(5)
                console.log(`Async Funtion ${obj.value}, ${obj.result}`)
                console.log("Fin Async Funtion")
            }
            catch(err){
            console.error(err)
            }
        }
            functionAsincronaDeclarada()
*/
            //SECCIÓN 49
            




    </script>
</body>
</html>